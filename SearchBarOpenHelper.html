<script>
//A trigger: Search Bar Open Helper
$('.search').click(function(){
	if($('.fakesubheader').css('display') == 'none'){
		$('.fakesubheader').css({'display':'block','z-index':'1000',
			'height': '100px'
		});
		$('.searchresultprovider').css({'z-index': '1000'});
		$('.button').css({'display':'none', 'width': '0px', 'height': '0px'});
		$('.submenu').css({'display':'none','z-index':'1'});
		var headercolor = $('.bgwrapper').css('background-color');
		$('.fakesubheader').css({'background-color': headercolor});
		$('#searchkey').css({'background-color': headercolor});

		$('.searchresultprovider').css({'background-color': headercolor,
		 	'opacity': '0.9'});
		$('.searchresultprovider').css({'display':'block',
		});

	}else{
		$('.fakesubheader').css({'display' : 'none',
			'height': '0px','z-index':'10'});
		$('.submenu').css({'display':'inline-block'});
		$('.button').css({'display':'inline-block', 'width': '75px', 'height': '100px'});
		$('.searchresultprovider').css({'display':'none',
		});
		// But in a thorough test, it passes all of our test through Android Samsung browser and Chrome on Android,
		// we just let magic happens again :D
		/* 
		  if(navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/)){
		     $('.submenu').css({
		      'overflow': 'scroll'
		     })
		     $('.button').css({
		      'display': 'none'
		     })
		  } 
		*/
	}
});

var headerheight = parseInt($('.fakesubheader').css('height'));
var windowheight = parseInt($(window).height());

$('.searchresultprovider').css({'min-height': windowheight - headerheight});

//The content below is ALL ABOUT AJAX
$('#searchkey').keyup(function(e){
	e.preventDefault();
	var forming = $('.searchform');
	$.ajax({
		type: 'GET',
		url: forming.attr('action'),
		data: forming.serialize(),
		success: function (data){
			$('.searchresultprovider').html(data);
		},
		error: function(){
			alert("Error");
		}
	});
});

</script>
